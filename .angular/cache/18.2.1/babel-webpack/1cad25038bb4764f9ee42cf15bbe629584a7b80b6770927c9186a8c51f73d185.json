{"ast":null,"code":"import { Router } from '@angular/router';\nimport { CustomerService } from '../../services/customer.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/customer.service\";\nimport * as i2 from \"@angular/router\";\nexport let CheckoutComponent = /*#__PURE__*/(() => {\n  class CheckoutComponent {\n    constructor(customerService, router) {\n      this.customerService = customerService;\n      this.router = router;\n    }\n    ngOnInit() {\n      this.customerService.currentProduct.subscribe(product => this.single_product_id = product);\n      this.user_id = Number(sessionStorage.getItem('user_session_id'));\n      this.productDetail(this.single_product_id);\n      this.userAddress(this.user_id);\n    }\n    productDetail(single_product_id) {\n      this.customerService.individualProduct(single_product_id).subscribe(data => {\n        this.individual_product = data;\n        // console.log(\"One Product\", this.individual_product);\n      }, error => {\n        console.log(\"My error\", error);\n      });\n    }\n    userAddress(user_id) {\n      this.customerService.userDetail(user_id).subscribe(data => {\n        // this.user_detail = data.address;\n        this.user_address = data.address;\n        this.user_contact_no = data.mobNumber;\n      }, error => {\n        console.log(\"My error\", error);\n      });\n    }\n    placeOrder() {\n      this.order_dto = {\n        id: 0,\n        userId: this.user_id,\n        sellerId: 2,\n        //Now it is hard coded, we are not implimented multi seller functionlity\n        product: {\n          id: this.individual_product.id,\n          name: this.individual_product.name,\n          uploadPhoto: this.individual_product.uploadPhoto,\n          productDesc: this.individual_product.productDesc,\n          mrp: this.individual_product.mrp,\n          dp: this.individual_product.dp,\n          status: this.individual_product.status\n        },\n        deliveryAddress: {\n          id: 0,\n          addLine1: this.user_address.addLine1,\n          addLine2: this.user_address.addLine2,\n          city: this.user_address.city,\n          state: this.user_address.state,\n          zipCode: Number(this.user_address.zipCode)\n        },\n        contact: this.user_contact_no,\n        dateTime: new Date().toLocaleDateString()\n      };\n      // console.log(\"Place order dto\", this.order_dto);\n      this.customerService.insertNewOrder(this.order_dto).subscribe(data => {\n        // console.log(\"Order placed successfully\", data);\n        alert(\"Order places successfully\");\n        this.router.navigateByUrl(\"/buyer-dashboard\");\n      }, err => {\n        alert(\"Some Error Occured\");\n      });\n    }\n    static #_ = (() => this.ɵfac = function CheckoutComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || CheckoutComponent)(i0.ɵɵdirectiveInject(i1.CustomerService), i0.ɵɵdirectiveInject(i2.Router));\n    })();\n    static #_2 = (() => this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CheckoutComponent,\n      selectors: [[\"app-checkout\"]],\n      decls: 59,\n      vars: 13,\n      consts: [[\"aria-label\", \"breadcrumb\"], [1, \"breadcrumb\"], [1, \"breadcrumb-item\"], [1, \"row\"], [1, \"col-md-8\"], [1, \"card\"], [1, \"card-header\"], [1, \"card-body\", \"product-detail\"], [1, \"col-md-4\"], [1, \"card-img-top\", 3, \"src\", \"alt\"], [1, \"card-title\"], [1, \"card-text\", \"product-desc\"], [1, \"float-left\"], [1, \"float-right\"], [1, \"card-body\"], [1, \"card-text\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [\"role\", \"alert\", 1, \"alert\", \"alert-info\"], [\"routerLink\", \"/my-profile\", 1, \"text-info\", \"sim-pointer\"]],\n      template: function CheckoutComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"br\");\n          i0.ɵɵelementStart(1, \"nav\", 0)(2, \"ol\", 1)(3, \"li\", 2)(4, \"a\");\n          i0.ɵɵtext(5, \"Buyer\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"li\", 2)(7, \"a\");\n          i0.ɵɵtext(8, \"Checkout\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(9, \"div\", 3)(10, \"div\", 4)(11, \"div\", 5)(12, \"div\", 6);\n          i0.ɵɵtext(13, \" Product Detail \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"div\", 7)(15, \"div\", 3)(16, \"div\", 8);\n          i0.ɵɵelement(17, \"img\", 9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"div\", 4)(19, \"h4\", 10);\n          i0.ɵɵtext(20);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(21, \"br\");\n          i0.ɵɵelementStart(22, \"p\", 11);\n          i0.ɵɵtext(23);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"p\")(25, \"span\", 12)(26, \"strong\");\n          i0.ɵɵtext(27, \"MRP\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(28, \": \");\n          i0.ɵɵelementStart(29, \"del\");\n          i0.ɵɵtext(30);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(31, \"span\", 13)(32, \"strong\");\n          i0.ɵɵtext(33, \"DP\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(34);\n          i0.ɵɵelementEnd()()()()()()();\n          i0.ɵɵelementStart(35, \"div\", 8)(36, \"div\", 5)(37, \"div\", 6);\n          i0.ɵɵtext(38, \" Address Detail \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(39, \"div\", 14)(40, \"h5\", 10);\n          i0.ɵɵtext(41);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(42, \"p\", 15);\n          i0.ɵɵtext(43);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(44, \"p\", 15);\n          i0.ɵɵtext(45);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(46, \"p\", 15);\n          i0.ɵɵtext(47);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(48, \"p\", 15);\n          i0.ɵɵtext(49);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(50, \"a\", 16);\n          i0.ɵɵlistener(\"click\", function CheckoutComponent_Template_a_click_50_listener() {\n            return ctx.placeOrder();\n          });\n          i0.ɵɵtext(51, \"Deliver Here\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(52, \"div\", 17)(53, \"strong\");\n          i0.ɵɵtext(54, \"Note: \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(55, \" We are not giving mutiple address addition, If you want to deliver in diffrent addres for now chage the address in \");\n          i0.ɵɵelementStart(56, \"span\", 18);\n          i0.ɵɵtext(57, \"My profile\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(58, \" section. \");\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(17);\n          i0.ɵɵpropertyInterpolate(\"src\", ctx.individual_product == null ? null : ctx.individual_product.uploadPhoto, i0.ɵɵsanitizeUrl);\n          i0.ɵɵpropertyInterpolate(\"alt\", ctx.individual_product == null ? null : ctx.individual_product.name);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(ctx.individual_product == null ? null : ctx.individual_product.name);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(ctx.individual_product == null ? null : ctx.individual_product.productDesc);\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate(ctx.individual_product == null ? null : ctx.individual_product.mrp);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate1(\": \", ctx.individual_product == null ? null : ctx.individual_product.dp, \"\");\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate(ctx.user_address == null ? null : ctx.user_address.name);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate2(\"\", ctx.user_address == null ? null : ctx.user_address.addLine1, \",\", ctx.user_address == null ? null : ctx.user_address.addLine2, \"\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate2(\"\", ctx.user_address == null ? null : ctx.user_address.city, \",\", ctx.user_address == null ? null : ctx.user_address.state, \"\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\"Postal Code: \", ctx.user_address == null ? null : ctx.user_address.zipCode, \"\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\"Contact Number: \", ctx.user_contact_no, \"\");\n        }\n      },\n      dependencies: [i2.RouterLink],\n      styles: [\".product-detail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:15rem}\"]\n    }))();\n  }\n  return CheckoutComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}